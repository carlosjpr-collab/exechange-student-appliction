<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<!-- awsme icon -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
	integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
<title></title>
</head>

<div id="HomeStudent_myApplications" class="container-fluid">
	<div class="row">
  <div th:insert="~{nav :: copy}"></div>	</div>

	<div class="container">
		<div class="row">
			<br>
		</div>
		<div class="row">
			<br>
		</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript">
var app = new Vue({
   el: '#HomeStudent_apply',
   data: {
		 universityName:"par default",
		 search:"",
         list_university: [],
		 acceptV:false,
		 universityId:"par default",
		 universityCountry:"par default",
		 universityCity:"par default",
		 universityUrl:"par default",
		 universityCourses:"par default",
		 showUniversityActive:false
			 },
	 computed: {
		 acceptPolicy(){
			return !this.acceptV;
		 },
    filteredList() {
      return this.list_university.filter(university => {
        return university.url.toLowerCase().includes(this.search.toLowerCase())
      })
    }},
   methods:{
	   apply: function(id){
			 console.log(id);
			axios({
				method: 'put',
				url: '/service/application',
				data:JSON.stringify({
					"idUniv" : id,
					"agreement" : 1,
					"status" : "wait insa"
					} ),
                headers:{'Content-Type': 'application/json; charset=utf-8'}
			})},

		 openbox: function(index){
			 	var self=this;
			    this.acceptV=false;
			 	this.showUniversityActive=true;
			 	this.universityName=this.list_university[index].name;
				this.universityId=this.list_university[index].id;
				this.universityCity=this.list_university[index].city;
				this.universityUrl=this.list_university[index].url;
				this.universityCountry=this.list_university[index].country;
				axios.get('/service/course?id='+this.list_university[index].id,{port:8080})
	      .then(function (response) {
	    	  self.universityCourses=response.data;
			})},

		 getStarting: function() {
	  	self=this;
      axios.get('/service/application',{port:8080})
  .then(function (response) {
   console.log(response);
  })
  .catch(function (error) {
    // handle error
    console.log(error);
  })
  .then(function () {
    // always executed
  });
       }
 },
 beforeMount(){
    this.getStarting()
 },
 })
</script>
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
	integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
	integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
	integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>
